---
- name: "Converge â€” wireless_ethernet_port_profiles (deleted)"
  hosts: localhost
  gather_facts: false
  tasks:
  - name: Gather current wireless_ethernet_port_profiles to get server-assigned IDs
    cisco.meraki_rm.meraki_wireless_ethernet_port_profiles:
      network_id: N_123456789012345678
      state: gathered
    register: current

  - name: Delete all gathered wireless_ethernet_port_profiles
    cisco.meraki_rm.meraki_wireless_ethernet_port_profiles:
      network_id: N_123456789012345678
      state: deleted
      config: "{{ current.gathered }}"
    register: delete_result
    when: current.gathered | length > 0
