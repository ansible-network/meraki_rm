---
- name: "Verify â€” facts (gathered)"
  hosts: localhost
  gather_facts: false
  tasks:
  - name: Gather current facts
    cisco.meraki_rm.meraki_facts:
      organization_id: org_facts_gathered
      gather_subset:
      - all
    register: gathered
  - name: Assert ansible_facts were returned
    ansible.builtin.assert:
      that:
      - gathered.ansible_facts is defined
      - gathered.ansible_facts.meraki_organizations is defined
      - gathered.ansible_facts.meraki_networks is defined
      fail_msg: "Expected ansible_facts with meraki keys, got {{ gathered.keys() | list }}"
