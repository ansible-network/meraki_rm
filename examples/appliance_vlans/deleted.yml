---
# Manage Meraki appliance VLANs â€” remove configuration

- name: Define resource to delete
  ansible.builtin.set_fact:
    expected_config:
      vlan_id: "100"
      group_policy_id: example

- name: Delete appliance_vlans configuration
  cisco.meraki_rm.meraki_appliance_vlans:
    network_id: "N_123456789012345678"
    state: deleted
    config:
      - "{{ expected_config }}"
  register: delete_result

- name: Assert delete succeeded
  ansible.builtin.assert:
    that:
      - delete_result is not failed
      - delete_result.before is defined
      - delete_result.after is defined
